{"ast":null,"code":"import _objectSpread from\"/Users/phatnguyen/Documents/GitHub/fullstackopen/notes(example)/frontend/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"/Users/phatnguyen/Documents/GitHub/fullstackopen/notes(example)/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _regeneratorRuntime from\"/Users/phatnguyen/Documents/GitHub/fullstackopen/notes(example)/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/phatnguyen/Documents/GitHub/fullstackopen/notes(example)/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/phatnguyen/Documents/GitHub/fullstackopen/notes(example)/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect}from'react';import Note from'./components/Note';import noteService from'./services/notes';import Notification from'./components/Notification';import loginService from'./services/login';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var App=function App(){var _useState=useState([]),_useState2=_slicedToArray(_useState,2),notes=_useState2[0],setNotes=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),newNote=_useState4[0],setNewNote=_useState4[1];var _useState5=useState(true),_useState6=_slicedToArray(_useState5,2),showAll=_useState6[0],setShowAll=_useState6[1];var _useState7=useState(null),_useState8=_slicedToArray(_useState7,2),errorMessage=_useState8[0],setErrorMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),username=_useState10[0],setUsername=_useState10[1];var _useState11=useState(''),_useState12=_slicedToArray(_useState11,2),password=_useState12[0],setPassword=_useState12[1];var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),user=_useState14[0],setUser=_useState14[1];useEffect(function(){noteService.getAll().then(function(initialNotes){setNotes(initialNotes);});},[]);var handleLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return loginService.login({username:username,password:password});case 4:_user=_context.sent;setUser(_user);setUsername('');setPassword('');_context.next=14;break;case 10:_context.prev=10;_context.t0=_context[\"catch\"](1);setErrorMessage('Wrong credentials');setTimeout(function(){setErrorMessage(null);},5000);case 14:case\"end\":return _context.stop();}},_callee,null,[[1,10]]);}));return function handleLogin(_x){return _ref.apply(this,arguments);};}();var addNote=function addNote(event){event.preventDefault();var noteObject={content:newNote,important:Math.random()<0.5};noteService.create(noteObject).then(function(returnedNote){setNotes([].concat(_toConsumableArray(notes),[returnedNote]));setNewNote('');});};var handleNoteChange=function handleNoteChange(event){setNewNote(event.target.value);};var notesToShow=showAll?notes:notes.filter(function(note){return note.important;});var toggleImportanceOf=function toggleImportanceOf(id){var note=notes.find(function(n){return n.id===id;});var changedNote=_objectSpread(_objectSpread({},note),{},{important:!note.important});noteService.update(id,changedNote).then(function(returnedNote){setNotes(notes.map(function(note){return note.id!==id?note:returnedNote;}));}).catch(function(error){setErrorMessage(\"Note '\".concat(note.content,\"' was already removed from server\"));setTimeout(function(){setErrorMessage(null);},5000);});};var loginForm=function loginForm(){return/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleLogin,children:[/*#__PURE__*/_jsxs(\"div\",{children:[\"username\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:username,name:\"Username\",onChange:function onChange(_ref2){var target=_ref2.target;return setUsername(target.value);}})]}),/*#__PURE__*/_jsxs(\"div\",{children:[\"password\",/*#__PURE__*/_jsx(\"input\",{type:\"password\",value:password,name:\"Password\",onChange:function onChange(_ref3){var target=_ref3.target;return setPassword(target.value);}})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"login\"})]});};var noteForm=function noteForm(){/*#__PURE__*/_jsxs(\"form\",{onSubmit:addNote,children:[/*#__PURE__*/_jsx(\"input\",{value:newNote,onChange:handleNoteChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"save\"})]});};return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Notes\"}),/*#__PURE__*/_jsx(Notification,{message:errorMessage}),/*#__PURE__*/_jsxs(\"div\",{children:[user===null&&loginForm(),user&&/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsxs(\"p\",{children:[user.name,\" logged in\"]}),noteForm()]})]}),/*#__PURE__*/_jsx(\"div\",{children:/*#__PURE__*/_jsxs(\"button\",{onClick:function onClick(){return setShowAll(!showAll);},children:[\"Show \",showAll?'important':'all']})}),/*#__PURE__*/_jsx(\"ul\",{children:notesToShow.map(function(note){return/*#__PURE__*/_jsx(Note,{note:note,toggleImportance:function toggleImportance(){return toggleImportanceOf(note.id);}},note.id);})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:addNote,children:[/*#__PURE__*/_jsx(\"input\",{value:newNote,onChange:handleNoteChange}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Save\"})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","Note","noteService","Notification","loginService","jsx","_jsx","jsxs","_jsxs","App","_useState","_useState2","_slicedToArray","notes","setNotes","_useState3","_useState4","newNote","setNewNote","_useState5","_useState6","showAll","setShowAll","_useState7","_useState8","errorMessage","setErrorMessage","_useState9","_useState10","username","setUsername","_useState11","_useState12","password","setPassword","_useState13","_useState14","user","setUser","getAll","then","initialNotes","handleLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","_user","wrap","_callee$","_context","prev","next","preventDefault","login","sent","t0","setTimeout","stop","_x","apply","arguments","addNote","noteObject","content","important","Math","random","create","returnedNote","concat","_toConsumableArray","handleNoteChange","target","value","notesToShow","filter","note","toggleImportanceOf","id","find","n","changedNote","_objectSpread","update","map","catch","error","loginForm","onSubmit","children","type","name","onChange","_ref2","_ref3","noteForm","message","onClick","toggleImportance"],"sources":["/Users/phatnguyen/Documents/GitHub/fullstackopen/notes(example)/frontend/src/App.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport Note from './components/Note';\nimport noteService from './services/notes';\nimport Notification from './components/Notification';\nimport loginService from './services/login'\n\nconst App = () => {\n  const [notes, setNotes] = useState([]);\n  const [newNote, setNewNote] = useState('');\n  const [showAll, setShowAll] = useState(true);\n  const [errorMessage, setErrorMessage] = useState(null)\n  const [username, setUsername] = useState('')\n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null)\n\n  useEffect(() => {\n    noteService.getAll().then((initialNotes) => {\n      setNotes(initialNotes);\n    });\n  }, []);\n\n  const handleLogin = async event => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({username, password})\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('Wrong credentials')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n\n  const addNote = (event) => {\n    event.preventDefault();\n    const noteObject = {\n      content: newNote,\n      important: Math.random() < 0.5,\n    };\n\n    noteService.create(noteObject).then((returnedNote) => {\n      setNotes([...notes, returnedNote]);\n      setNewNote('');\n    });\n  };\n\n  const handleNoteChange = (event) => {\n    setNewNote(event.target.value);\n  };\n\n  const notesToShow = showAll ? notes : notes.filter((note) => note.important);\n\n  const toggleImportanceOf = (id) => {\n    const note = notes.find((n) => n.id === id);\n    const changedNote = { ...note, important: !note.important };\n    noteService\n      .update(id, changedNote)\n        .then(returnedNote => {\n          setNotes(notes.map(note => note.id !== id ? note : returnedNote))\n        })\n        .catch(error => {\n          setErrorMessage(\n            `Note '${note.content}' was already removed from server`\n          )\n          setTimeout(() => {\n            setErrorMessage(null)\n          }, 5000)\n        })\n  };\n\n  const loginForm = () => (\n    <form onSubmit={handleLogin}>\n      <div>\n        username\n        <input type=\"text\" value={username} name=\"Username\"\n        onChange={({target}) => setUsername(target.value)} />\n      </div>\n      <div>\n        password\n        <input type=\"password\" value={password} name=\"Password\"\n        onChange={({target}) => setPassword(target.value)} />\n      </div>\n      <button type=\"submit\">login</button>\n    </form>\n  )\n\n  const noteForm = () => {\n    <form onSubmit={addNote}>\n      <input value={newNote} onChange={handleNoteChange} />\n      <button type=\"submit\">save</button>\n    </form>\n  }\n\n  return (\n    <div>\n      <h1>Notes</h1>\n      <Notification message={errorMessage} />\n      <div>\n        {user === null && loginForm()}\n        {user && <div>\n          <p>{user.name} logged in</p>\n          {noteForm()}\n          </div>}\n      </div>\n      <div>\n        <button onClick={() => setShowAll(!showAll)}>\n          Show {showAll ? 'important' : 'all'}\n        </button>\n      </div>\n      <ul>\n          {notesToShow.map((note) => (\n            <Note key={note.id} note={note} toggleImportance={() => toggleImportanceOf(note.id)} />\n          ))}\n      </ul>\n      <form onSubmit={addNote}>\n        <input value={newNote} onChange={handleNoteChange} />\n        <button type=\"submit\">Save</button>\n      </form>\n    </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}